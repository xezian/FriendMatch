<!DOCTYPE=html>
<html>
    <head>
        <!-- Latest compiled and minified CSS & JS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    </head>
    <body>
        <h4 class="row text-center">Congrats! You have reached the "Friend Match" compatability survey:</h4>
        <div class="container">
            <div class="form-group text-center">
                <label for="friend-name">Name (required)</label>
                <input type="text" class="form-control" id="friend-name">
                <label for="picture-link">Picture URL (required)</label>
                <input type="text" class="form-control" id="picture-link">
            </div>
            <div class="row text-center">
                <label for="question">Facebook?</label>
                <select class="chosen-select" id="question-1">
                    <option value="1">1 (Absoultely NOT!)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10 (Absolutely!</option>
                </select>
            </div>
            <div class="form-group">
                <div class="row text-center">
                    <label for="question">Google?</label>
                    <select class="chosen-select" id="question-2">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!</option>
                    </select>
                </div>
                <div class="row text-center">
                    <label for="question">Twitter?</label>
                    <select class="chosen-select" id="question-3">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!</option>
                    </select>
                </div>
                <div class="row text-center">
                    <label for="question">Tinder?</label>
                    <select class="chosen-select" id="question-4">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!</option>
                    </select>
                </div>
                <div class="row text-center">
                    <label for="question">Snapchat?</label>
                    <select class="chosen-select" id="question-5">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!</option>
                    </select>
                </div>
                <div class="row text-center">
                    <label for="question">Instagram?</label>
                    <select class="chosen-select" id="question-6">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!</option>
                    </select>
                </div>
                <div class="row text-center">
                    <label for="question">PayPal?</label>
                    <select class="chosen-select" id="question-7">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!</option>
                    </select>
                </div>
                <div class="row text-center">
                    <label for="question">tumblr?</label>
                    <select class="chosen-select" id="question-8">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!</option>
                    </select>
                </div>
                <div class="row text-center">
                    <label for="question">Reddit?</label>
                    <select class="chosen-select" id="question-9">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!</option>
                    </select>
                </div>
                <div class="row text-center">
                    <label for="question">Pinterest?</label>
                    <select class="chosen-select" id="question-10">
                        <option value="1">1 (Absoultely NOT!)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10 (Absolutely!)</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
                Submit</button>
            </div>
            <div class="modal fade results-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="row text-center">
                            <h3>Your best match:</h3>
                            <h1 id="match-name"></h1>
                        </div>
                        <div class="row text-center" id="picture-spot">
                        </div>
                    </div>
                </div>
            </div>
        </div>    
    </body>
    <script type="text/javascript">
        // front end JavaScript to submit survey results
        $(document).on("click", "#submit", function(event) {
            event.preventDefault();
            // Here we grab the form elements
            let newFriend = {
                friendName: $("#friend-name").val().trim(),
                pictureLink: $("#picture-link").val(),
                answers: [],
            };
            // push answers into object
            for (let i = 1; i < 11; i++){
                newFriend.answers.push(parseInt($(`#question-${i}`).val()));
            };
            // let's see it (in the browser console)
            console.log(newFriend);
            // post your own data, and run a function with the data coming back (the friend who matches the best)
            $.post("/api/friends", newFriend, function(data) {
                console.log(data);
                $("#match-name")
                    .text(data.friendName);
                let image = $("<img>");
                image
                    .attr("src", data.pictureLink)
                    .attr("alt", data.friendName)
                    .appendTo($("#picture-spot"));            
            });
            $(".results-modal").modal("toggle");
        });
    </script>
</html>